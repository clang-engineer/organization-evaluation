<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/layout/layoutTurn}">

<div layout:fragment="content">
	<!-- .container-fluid -->
	<div class="container-fluid">
		<!-- Breadcrumbs-->
		<ol class="breadcrumb">
			<li class="breadcrumb-item">
				<a th:href="@{list(tno=${tno})}">List</a>
			</li>
			<li class="breadcrumb-item">
				<a th:href="@{view(tno=${tno},sno=${staff.sno})}">Detail</a>
			</li>
			<li class="breadcrumb-item active">Modify</li>
		</ol>

		<!-- Page Content -->
		<hr>
		<!-- DataTales Example -->
		<div class="card shadow mb-4">
			<div class="card-body">
				<form id="f1" th:action="@{modify}" method="POST">
					<input type="hidden" name="sno" th:value="${staff.sno}">
					<div class="form-group">
						<label>Name</label>
						<input type="text" class="form-control" name="name" placeholder="" th:value="${staff.name}">
					</div>
					<div class="form-group">
						<label>Email</label>
						<input type="email" class="form-control" name="email" placeholder="" th:value="${staff.email}">
					</div>
					<div class="form-group">
						<label>Password</label>
						<input type="text" class="form-control" name="password" placeholder="" th:value="${staff.password}">
					</div>
					<div class="form-group">
						<input type="text" class="form-control" name="password2" placeholder="" th:value="${staff.password}">
					</div>
					<div class="form-group">
						<label>Telephone</label>
						<input class="form-control" type="tel" name="telephone" th:value="${staff.telephone}" placeholder="000-0000-0000">
					</div>
					<div class="form-group">
						<label>Level</label>
						<select name="level" class="form-control">
							<option value="">--</option>
							<option th:each="res:${distinctInfo.level}" th:text="${res}" th:value="${res}" th:selected="${staff.level}==${res}"></option>
						</select>
					</div>
					<div class="form-group">
						<label>Department1</label>
						<select name="department1" class="form-control">
							<option value="">--</option>
							<option th:each="res:${distinctInfo.department1}" th:text="${res}" th:value="${res}" th:selected="${staff.department1}==${res}"></option>
						</select>
					</div>
					<div class="form-group">
						<label>Department2</label>
						<select name="department2" class="form-control">
							<option value="">--</option>
							<option th:each="res:${distinctInfo.department2}" th:text="${res}" th:value="${res}" th:selected="${staff.department2}==${res}"></option>
						</select>
					</div>
					<div class="form-group">
						<label>Division1</label>
						<select name="division1" class="form-control">
							<option value="">--</option>
							<option th:each="res:${distinctInfo.division1}" th:text="${res}" th:value="${res}" th:selected="${staff.division1}==${res}"></option>
						</select>
					</div>
					<div class="form-group">
						<label>Division2</label>
						<select name="division2" class="form-control">
							<option value="">--</option>
							<option th:each="res:${distinctInfo.division2}" th:text="${res}" th:value="${res}" th:selected="${staff.division2}==${res}"></option>
						</select>
					</div>
					<input type="hidden" name="updateId" th:value="${#authentication.name}">
				</form>
				<fieldset disabled>
					<div class="form-group">
						<label>WriteId</label>
						<input type="text" class="form-control" name="writeId" th:value="${staff.writeId}">
					</div>
					<div class="form-group">
						<label>WriteDate</label>
						<input type="url" class="form-control" name="writeDate" th:value="${#dates.format(staff.writeDate,'yyyy-MM-dd  hh:mm:ss')}">
					</div>
					<div class="form-group">
						<label>UpdateId</label>
						<input type="text" class="form-control" name="updateId" th:value="${#authentication.name}">
					</div>
					<div class="form-group">
						<label>UpdateDate</label>
						<input type="url" class="form-control" name="updateDate" th:value="${#dates.format(staff.updateDate,'yyyy-MM-dd  hh:mm:ss')}">
					</div>
				</fieldset>
				<div class="form-group">
					<button data-oper="modify" type="button" class="btn btn-success">Modify</button>
					<button data-oper="remove" type="button" class="btn btn-danger">remove</button>
					<button data-oper="list" type="button" class="btn btn-info">List</button>
				</div>
			</div>
		</div>
	</div>
	<!-- /.container-fluid -->
</div>



<th:block layout:fragment="script">
	<script th:inline="javascript">
		$(document).ready(function () {
			var formObj = $("#f1");

			$('button').on("click", function (e) {
				e.preventDefault();

				var operation = $(this).data("oper");
				console.log(operation);
				// [[@{'/staff/list'}]]
				if (operation === 'list') {
					formObj.empty();
					formObj.attr("action", "list").attr("method", "get");
				} else if (operation === 'remove') {
					if (delchk() == true) {
						formObj.attr("action", "remove");
					} else {
						return;
					};
				}

				formObj.append("<input type='hidden' name='tno' value='" + [[${ tno }]] + "'/>");
				formObj.append("<input type='hidden' name='page' value='" + [[${ pageVO.page }]] + "'/>");
				formObj.append("<input type='hidden' name='size' value='" + [[${ pageVO.size }]] + "'/>");
				formObj.append("<input type='hidden' name='type' value='" + [[${ pageVO.type }]] + "'/>");
				formObj.append("<input type='hidden' name='keyword' value='" + [[${ pageVO.keyword }]] + "'/>");

				formObj.submit();
			});

			function delchk() {
				if (confirm("삭제하시겠습니까?")) {
					return true;
				} else {
					return false;
				}
			}
		});
	</script>
</th:block>